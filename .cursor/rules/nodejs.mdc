---
description: Notes To-Do App
globs: 
---

# **ğŸ“Œ Cursor AI Rules for Secure Notes To-Do App**

## **1ï¸âƒ£ General Rules**
âœ… Enforce **TypeScript** for type safety in both backend (Node.js) and frontend (Next.js).  
âœ… Use **ESLint and Prettier** to ensure consistent coding style.  
âœ… Follow the **MVC pattern** for backend architecture.  
âœ… Use **environment variables (`.env`)** to store sensitive data.  

---

## **2ï¸âƒ£ Backend (Node.js, Express, Prisma, PostgreSQL)**
âœ… **Use Prisma ORM** â€“ No raw SQL queries to prevent SQL injection.  
âœ… **API routes must be RESTful** â€“ Follow standard naming conventions (`/api/notes`, `/api/auth`).  
âœ… **Input validation is required** â€“ Use `express-validator` to sanitize and validate user input.  
âœ… **Error handling middleware** must catch all errors and return proper HTTP status codes.  
âœ… **Authentication must use JWT (HttpOnly cookies)** â€“ No local storage for tokens.  
âœ… **Rate Limiting** â€“ Apply `express-rate-limit` to prevent abuse.  
âœ… **Logging** â€“ Use `winston` or `pino` for logging API requests and errors.  

---

## **3ï¸âƒ£ Frontend (Next.js, React, Tailwind)**
âœ… **Use Server Components for static data** and Client Components for interactive elements.  
âœ… **State Management** â€“ Prefer React hooks (`useState`, `useReducer`, `useContext`).  
âœ… **Forms must be protected against XSS & CSRF** â€“ Sanitize input, escape output, and use CSRF tokens.  
âœ… **Error messages should be user-friendly** â€“ No raw server error messages displayed.  
âœ… **Use SWR or React Query** for data fetching instead of direct API calls in components.  
âœ… **Protect sensitive routes** â€“ Redirect unauthenticated users to the login page.  

---

## **4ï¸âƒ£ Security Best Practices**
âœ… **SQL Injection Prevention** â€“ Use **Prisma ORM** instead of raw SQL queries.  
âœ… **XSS Prevention** â€“ Escape user input & use `sanitize-html`.  
âœ… **CSRF Protection** â€“ Implement `csurf` middleware in the backend.  
âœ… **Clickjacking Prevention** â€“ Use `helmet` with `X-Frame-Options: DENY`.  
âœ… **Use strong password hashing** â€“ Use `bcrypt` with at least 10 salt rounds.  
âœ… **CORS Policy** â€“ Restrict allowed origins, headers, and methods.  

---

## **5ï¸âƒ£ Deployment & CI/CD**
âœ… Use **Docker** to containerize the app.  
âœ… **Use GitHub Actions** for CI/CD to test and deploy the application.  
âœ… **Database migrations must be automated** â€“ Use Prisma migrations.  
âœ… **Production logging should not expose sensitive data**.  
âœ… **Use `.env` for secrets** â€“ Never commit secrets to Git.  

